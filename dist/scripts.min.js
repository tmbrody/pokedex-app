const pokemonRepository=function(){const e=[],t=document.querySelector('.btn-outline-secondary'),n=document.querySelector('.modal'),i=document.querySelector('.modal-dialog'),o=document.querySelector('.modal-content'),r=document.querySelector('.modal-header'),a=document.querySelector('.modal-title'),l=document.querySelector('.btn-close'),s=document.querySelector('.modal-body'),c=document.getElementsByTagName('li');function d(t){'object'==typeof t&&'name'in t&&'detailsUrl'in t?e.push(t):console.log('Pokémon is not correct')}function m(e){u();const t=e.detailsUrl;return fetch(t).then((function(e){return e.json()})).then((function(t){p(),e.imageFrontUrl=t.sprites.front_default,e.imageBackUrl=t.sprites.back_default,e.imageFrontShinyUrl=t.sprites.front_shiny,e.imageBackShinyUrl=t.sprites.back_shiny,e.id=t.id,e.height=t.height,e.weight=t.weight,e.types=t.types,e.abilities=t.abilities})).catch((function(e){console.error(e)}))}function u(){document.querySelector('.text-danger').classList.remove('d-none')}function p(){document.querySelector('.text-danger').classList.add('d-none')}return l.addEventListener('click',(()=>{n.classList.remove('modal-open'),n.setAttribute('style','display:none'),c[0].lastChild.click()})),t.addEventListener('click',(function(){const e=document.querySelector('.d-flex');if(1===e.childElementCount){const n=document.createElement('input');n.setAttribute('placeholder','Pokémon name'),n.setAttribute('type','search'),n.setAttribute('aria-label','Search Pokémon name'),n.classList.add('form-control','my-3','ps-2','col-sm'),t.blur(),n.autofocus=!0,e.appendChild(n),n.addEventListener('keydown',(e=>{if('Enter'===e.key){e.preventDefault(),n.value=n.value.charAt(0).toUpperCase()+n.value.slice(1);for(let e=0;e<c.length;e++)902>c[e].lastChild.getBoundingClientRect().top&&c[e].lastChild.getBoundingClientRect().top>42&&c[e].lastChild.click();for(let e=0;e<c.length;e++)c[e].innerText.split('\n')[0]===n.value&&setTimeout((function(){c[e].lastChild.click()}),5)}}))}})),{add:d,addListItem:function(e){const t=document.querySelector('.list-group-horizontal'),c=document.createElement('li');c.classList.add('list-group-item','text-center','col-sm-6','col-md-4','border','border-primary','bg-image','img-fluid');const d=document.createElement('p');d.classList.add('display-6'),d.innerHTML=`<strong>${e.name}</strong>`;const u=document.createElement('div');m(e).then((function(){u.innerHTML=`<img src=${e.imageFrontUrl} \n                            alt='${e.name} sprite'>`}));const p=document.createElement('button');p.innerHTML='Show more',p.classList.add('mb-2','btn','btn-secondary'),p.setAttribute('type','button'),p.setAttribute('data-bs-toggle','modal'),p.setAttribute('data-bs-target','#pokemonModal'),c.appendChild(d),c.appendChild(u),c.appendChild(p),t.appendChild(c),function(e,t){e.addEventListener('click',(function(){!function(e){m(e).then((function(){n.innerHTML='',a.className='modal-title h5 col-sm-3';const t={fire:'text-danger',grass:'text-success',water:'text-primary',electric:'text-warning',flying:'text-info',poison:'text-secondary'};e.types.forEach((e=>a.classList.add(t[e.type.name]))),a.innerHTML=`<p><strong>${e.name}</strong></p>`,s.innerHTML=`\n        Entry: ${e.id}<br>\n        Height: ${e.height}<br>\n        Weight: ${e.weight}<br>\n        Types: ${e.types[0].type.name}`,2===e.types.length&&(s.innerHTML+=`, ${e.types[1].type.name}`),s.innerHTML+=`<br>Abilities: ${e.abilities[0].ability.name}`,2===e.abilities.length&&(s.innerHTML+=`, ${e.abilities[1].ability.name}`),s.innerHTML+=`<br>\n        <img src=${e.imageFrontUrl} alt='${e.name} front sprite'>\n        <img src=${e.imageBackUrl} alt='${e.name} back sprite'>\n        <br>\n        <img src=${e.imageFrontShinyUrl} alt='${e.name} front shiny sprite'>\n        <img src=${e.imageBackShinyUrl} alt='${e.name} back shiny sprite'>\n      `,i.appendChild(o),o.appendChild(r),r.appendChild(a),r.appendChild(l),o.appendChild(s),n.appendChild(i)}))}(t)}))}(p,e)},getAll:function(){return e},serach:function(t){return e.filter((e=>e.name===t))},loadList:function(){return u(),fetch('https://pokeapi.co/api/v2/pokemon/?limit=151').then((function(e){return e.json()})).then((function(e){p(),e.results.forEach((function(e){d({name:e.name.charAt(0).toUpperCase()+e.name.slice(1),detailsUrl:e.url})}))})).catch((function(e){console.error(e)}))},loadDetails:m,showLoadingMessage:u,hideLoadingMessage:p}}();pokemonRepository.loadList().then((function(){pokemonRepository.getAll().forEach((function(e){pokemonRepository.addListItem(e)}))}));